<div align="center">
<H1>Kubernetes Architecture</H1>
</div>
<br>


## Что такоe Master Node in Kubernetes?

Главный узел — это отправная точка для всех административных задач, и он отвечает за управление архитектурой кластера Kubernetes.

В кластере может быть более одного главного узла, и это необходимо для проверки отказоустойчивости, так как большее количество главных узлов переводит систему в режим, известный как «Высокая доступность».

Однако один мастер-узел выполняет роль главного узла, выполняющего все задачи.


## Компоненты главного узла

**1) Kubernetes API server**

- Сервер API внутри главного узла — это место, где будут выполняться все административные задачи.

- Команды REST отправляются на сервер API, который будет обрабатывать и проверять запросы.

- По запросу результирующее состояние кластера будет сохранено на основе распределенного значения ключа.

**2) Scheduler**

- Этот компонент планирует задачи для указанных подчиненных узлов. Кроме того, каждый подчиненный узел будет хранить информацию об использовании ресурсов.

- Scheduler запланирует всю работу в виде Services и Pods.

- Прежде чем задача будет запланирована, планировщик рассмотрит требования к сервису: качество, сходство, анти-аффинити, локальность данных и т. д.

**3) Control manager**

- Запускает все встроенные контроллеры такие как Node или Replica контроллер  

**4) ETCD**

- Хранилище ключей и значений, которые используются в конфигурации кластера.

- Вы можете настроить ETCD извне или даже сделать его частью Kubernetes Master.

- ETCD написан на языке программирования "GO". В Kubernetes вы можете хранить детали конфигурации, такие как Secrets, ConfigMaps, подсети и т. д., а также сохранять состояние кластера.

**5) Cluster DNS (опцональный компонент)**

- Предоставляет внутрикластерный DNS для Pods и Services, обычно предоставляется с использованием плагинов K8s от CoreDNS.

**6) Cloud Controll Manager (Опциональный компонент)**

- Запуск и управление ресурсами облачных сервисов. Общается через API облачного провайера (AWS, Azure и т.п.). 
Например: Load balancer endpoint или Storage volume allocation.

---

## Worker Node Architecture

Рабочий узел запускает приложения через модули, а главный узел управляет модулями. Поды планируются на физическом сервере (подчиненном узле). Поэтому, если вы хотите получить доступ к приложениям из внешней среды, вам придется подключиться к этим узлам.


## Worker Node Components

**1. Container runtime**

- Рабочему Node требуется среда выполнения контейнера для управления и запуска жизненного цикла контейнера.

- Docker часто путают со средой выполнения контейнеров, но это платформа, которая использует контейнеры похожим образом.

**2. Kubelet** - управляет контейнерами на основе входящий Pod спецификаций  

- Kubelet взаимодействует с Master Node и выполняется на рабочих узлах. Он получает спецификации Pod через sercer API. Кроме того, он запускает связанны контейнеры в исправном Pod-e.

**3. cAdvisor**

- cAdvisor служит для анализа всех показателей использования сети, файлов, ЦП и памяти для каждого контейнера, работающего на указанном узле. Вы должны найти хороший инструмент для мониторинга, так как cAdvisor не может предложить решение для долгосрочного хранения.

**4. Kube-proxy** - управляет сетью соединения с модулями узла. например с использованием правил  iptables.

- Kube-proxy работает на каждом Node и работает с каждой подсетью хоста отдельно, чтобы гарантировать, что внешние стороны имеют доступ ко всем службам.

- Он также играет роль балансировщика нагрузки и сетевого прокси для любой службы, расположенной на рабочем Node. Кроме того, kube-proxy будет управлять сетевой маршрутизацией пакетов UDP и TCP.

- Сетевой прокси запускается на каждом рабочем Node и идет за endpoint для каждой службы (удаление/создание) на server API.

____________________________
